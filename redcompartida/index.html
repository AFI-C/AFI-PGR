---
layout: default
title: Estándar de Contrataciones abiertas | Análisis
---
<script type="text/javascript" src="assets/d3.min.js"></script>
<script type="text/javascript" src="datos/datos.json"></script>

<style>
/* Page */
.row {
	margin-left: -10px;
	margin-right: 8px;
}
h3.jumbo-title {
	font-weight: 700;
	color: #fff;
	margin-bottom: 10px;
}
#highlights .btn {
	margin-top: 40px;
	margin-left: 10px;
	margin-bottom: 20px;
}
#banner {
	text-align: left;
}
#banner .heading {
	font-size: 12px;
	color: #fff;
	padding-left: 0;
}
#banner .links {
	text-align: right;
}
#banner .links a {
	color: rgb(32,121,95);
	font-weight: bold;
	font-size: 12px;
	margin-left: 20px;
}
#highlights .container-fluid {
	padding-left: 0;
}
#info {
	padding: 40px 0;
}
.select-box {
	text-align: center;
	font-weight: 700;
	font-size: 12px;
	color: rgb(34,134,105);
	display: inline-block;
	cursor: pointer;
	margin-left: 10px;
}
.select-box-active, .select-box:hover {
	color: #fff;
}
.select-box-inactive {
	color: rgb(64,164,135);
}
.select-box-inactive:hover {
	color: rgb(64,164,135);
}
h3#sec-label {
	font-weight: 700;
}
/* viz */
#chart {
	position: relative;
}
.node {
  cursor: pointer;
}

.node circle {
  fill: #fff;
  stroke: rgb(71,71,71);
  stroke-width: 1.5px;
}

.node text {
  font: 10px 'Open Sans', sans-serif;
  font-weight: 700;
  fill: '#666';
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 16px;
  stroke-opacity: 0.65;
  background-color: rgb(71,71,71);
}
.link:hover {
	stroke: rgb(0,204,153);
}
.separator {
	border-bottom: 2px solid rgb(0,204,153);
	border-top: 2px solid rgb(0,204,153);
	width: 20px;
	display: inline-block;
}
div.ttip {
    position: absolute;
    text-align: left;
    width: 200px;
    padding: 5px;
    font: 10px 'Open Sans', sans-serif;
    background-color: rgb(71,71,71);
    color: #fff;
    border: 0px;
    border-radius: 8px;
    pointer-events: none;
}
div.infobox {
    position: absolute;
    text-align: left;
    width: 320px;
    padding: 10px;
    font: 12px 'Open Sans', sans-serif;
    line-height: 18px;
    background-color: #f6f6f6;
    color: #444;
    border: 0px;
    border-radius: 8px;
    max-height: 400px;
    overflow-y: scroll;
}
table.datos a {
	margin-top: 5px;
	color: #00cc99;
}
table.datos {
	border-collapse: collapse;
	font-size: 12px;
	margin-bottom: 40px;
}
table.datos td {
	margin-bottom: 10px;
}
.fformat {
    padding: 2px 4px;
    background-color: #222;
    color: #fff;
    font-weight: 700;
}
table.datos thead th {
	padding-bottom: 10px;
	padding: 10px 20px;
	font-size: 12px;
}
tr.datos-indicador td {
	background-color: rgb(238,238,238);
	padding: 20px;
	vertical-align: top;
}
tr.datos-indicador td.nombre-ind {
	font-weight: 600;
}
h2.page-title {
	font-weight: 300;
}
h4 {
	font-weight: 700;
}
header.page-header {
	background-color: rgb(246,246,246);
	margin: 0;
	padding-bottom: 30px;
}
circle.current {
	fill: rgb(250,105,105) !important;
	stroke: rgb(250,105,105) !important;
}
</style>
<section id="banner">
    <div class="container-fluid fixed">
        <div class="row">
            <div class="col-xs-6 heading">Red Compartida</div>
            <div class="col-xs-6 links">
            	<div onmousedown='draw_chart("Planeación")' class='select-box select-box-first select-box-active Planeación'>Planeación</div>
				<div onmousedown='draw_chart("Concurso")' class='select-box Concurso'>Concurso</div>
				<div title="La información se publicará conforme se genere durante el proyecto." data-toggle="tooltip" data-placement="bottom" class='select-box select-box-inactive Adjudicación'>Adjudicación</div>
				<div title="La información se publicará conforme se genere durante el proyecto." data-toggle="tooltip" data-placement="bottom" class='select-box select-box-inactive Contratación'>Contratación</div>
				<div title="La información se publicará conforme se genere durante el proyecto." data-toggle="tooltip" data-placement="bottom" class='select-box select-box-inactive Implementación'>Implementación</div>
            </div>
        </div>
    </div>
</section>
<section id="highlights">
    <div class="content">
        <div class="overlay"></div>
        <div class="container-fluid">
            <div class="row">
            	<div class='col-xs-12'><h3 class="jumbo-title">Estándar de Contrataciones Abiertas</h3></div>
            </div>
            <div class="row">
            	<div class='col-xs-8'><p>Visualiza y descarga los Datos Abiertos de las etapas de planeación y concurso de la Red Compartida. Durante el desarrollo del proyecto, trabajaremos junto con la Alianza para las Contrataciones Abiertas para continuar publicando datos accesibles, comparables y oportunos sobre las siguientes etapas de adjudicación, contratación e implementación, conforme estos se generen. Este proyecto es parte de un piloto para adaptar el Estándar de Datos para Contrataciones Abiertas a un modelo de alianza público privado.</p></div>
							<div class='col-xs-1'></div>
            	<div class='col-xs-3'><img src='assets/red-compartida_logo-blanco.png'/></div>
            </div>
        </div>
    </div>
</section>
<section id="info">
    <div class="container-fluid fixed">
    	<div class="row">
        	<h3 id="sec-label"></h3>
        </div>
        <div class="row">
        	<div id="chart"></div>
        </div>
    </div>
</section>
<section>
	<div class="container-fluid fixed">
		<div class="row">
        	<h4>Datos</h4>
        </div>
        <div class="row">
			<table id="datos" class="datos" style="width: 100%;">
				<thead>
					<tr><th>Nombre</th>
					<th>Dependencia</th>
					<th>Fecha</th>
					<th>Formato</th>
					<th></th>
				</tr></thead>
				<tbody><tr class="indicador-a datos-indicador"><td class="nombre-ind"><a href="http://busca.datos.gob.mx/#!/grupos/red-compartida">Red Compartida - Estandar de datos de contrataciones abiertas</a></td><td>Secretaría de Comunicaciones y Transportes</td><td>29/ene/2016</td><td><span class="fformat">CSV</span></td><td style="min-width:80px;"><center><a href="datos/Red%20Compartida%20-%20Estandar%20de%20datos%20de%20contrataciones%20abiertas.csv"><img width="35" height="36" src="assets/icon-circle-arrow-right-gray.png"></a></center></td></tr></tbody>
			</table>
		</div>
    </div>
</section>
<script>
function create_links(text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
    return text.replace(exp,"<a href='$1'>$1</a>");
}
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
function draw_chart(l) {
	var datos = jQuery.extend(true, {}, dt);

	if (datos[l].children.length > 10) multiplier = datos[l].children.length * 0.65;
	else multiplier = datos[l].children.length;

	$("#chart").empty();
	$("h3#sec-label").html(l);
	$('.select-box').removeClass('select-box-active');
	$('.'+l).addClass('select-box-active');

	var margin = {top: 20, right: 120, bottom: 20, left: 80},
		width = 1100 - margin.right - margin.left,
		height = multiplier*100 - margin.top - margin.bottom;

	var tt = d3.select("body").append("div")
		.attr("class", "ttip")
		.style("opacity", 0);

	var infobox = d3.select("#chart").append("div")
		.attr("class", "infobox")
		.style("opacity", 0);

	var i = 0,
		duration = 750,
		root;

	var tree = d3.layout.tree()
		.size([height, width]);

	var diagonal = d3.svg.diagonal()
		.projection(function(d) { return [d.y, d.x]; });

	var svg = d3.select("#chart").append("svg")
		.attr("width", width + margin.right + margin.left)
		.attr("height", height + margin.top + margin.bottom)
	  .append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");



	root = datos[l];
	root.x0 = height / 2;
	root.y0 = 0;

	function collapse(d) {
		if (d.children) {
		  d._children = d.children;
		  d._children.forEach(collapse);
		  d.children = null;
		}
	}

	root.children.forEach(collapse);
	update(root);

	d3.select(self.frameElement).style("height", "800px");

	function update(source) {
	  // Compute the new tree layout.
	  var nodes = tree.nodes(root).reverse(),
		  links = tree.links(nodes);

	  nodes.forEach(function(d) { d.children || d._children ? d.y = d.depth * 180 : d.y = d.depth * 140  });

	  var node = svg.selectAll("g.node")
		  .data(nodes, function(d) { return d.id || (d.id = ++i); });

	  var nodeEnter = node.enter().append("g")
		  .attr("class", "node")
		  .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
		  .on("click", click);

	  nodeEnter.append("circle")
		  .attr("r", 1e-6)
		  .style("fill", function(d) { return d._children ? "#444" : "rgb(0,204,153)"; })
		  .style("stroke", function(d) { return d._children ? "#444" : "rgb(0,204,153)"; });


	  nodeEnter.append("text")
		  .attr("x", function(d) { return d.children || d._children ? -15 : 15; })
		  .attr("dy", ".35em")
		  .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
		  .text(function(d) { return d.name; })
		  .style("fill-opacity", 1e-6);

	  var nodeUpdate = node.transition()
		  .duration(duration)
		  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

	  nodeUpdate.select("circle")
		  .attr("r", 8)
		  .style("fill", function(d) { return d._children ? "#444" : "rgb(0,204,153)"; })
		  .style("stroke", function(d) { return d._children ? "#444" : "rgb(0,204,153)"; });

	  nodeUpdate.select("text")
		  .style("fill-opacity", 1);

	  nodeEnter.select("circle")
	  	 .on("mouseover", function(d) {
			if (typeof d.mouseover != 'undefined') {
				tt.transition()
					.duration(200)
					.style("opacity", .9);
				tt.html(d.mouseover)
					.style("left", (d3.event.pageX + 30) + "px")
					.style("top", (d3.event.pageY - 20) + "px");
			}
          })
          .on("click", function(d) {

          	tt.transition()
				.duration(500)
				.style("opacity", 0);
			infobox.transition()
				.duration(500)
				.style("opacity", 0);
			if (typeof d.info1 != 'undefined') {
			d3.selectAll("circle")
				.classed("current", false);
			d3.select(this)
				.classed("current", true);
			h = "";
			if (d.info1 != '') h = h + "<h5>Información adicional</h5><p>"+d.info1+"</p>";
			if (d.info2 != '') h = h + "<h5>Área responsable</h5><p>"+d.info2+"</p>";
			if (d.info3 != '') h = h + "<h5>Más información</h5><p>"+create_links(d.info3)+"</p>";
			infobox.transition()
				.duration(200)
				.style("opacity", .9);
			infobox.html(h)
				.style("right", "30px")
				.style("top", function(d) {
					wh = $(document).height();
					iwh = $('.infobox').height();
					info_diff = wh - d3.event.pageY - 700;
					if (iwh > info_diff) return (d3.event.layerY - (iwh - info_diff)) + "px"
					else return (d3.event.layerY + 20) + "px";
				});

			}
          })
		  .on("mouseout", function(d) {
				tt.transition()
					.duration(500)
					.style("opacity", 0);
		  });

	  var nodeExit = node.exit().transition()
		  .duration(duration)
		  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
		  .remove();

	  nodeExit.select("circle")
		  .attr("r", 1e-6);

	  nodeExit.select("text")
		  .style("fill-opacity", 1e-6);

	  var link = svg.selectAll("path.link")
		  .data(links, function(d) { return d.target.id; });

	  link.enter().insert("path", "g")
		  .attr("class", "link")
		  .attr("d", function(d) {
			var o = {x: source.x0, y: source.y0};
			return diagonal({source: o, target: o});
		  });

	  link.transition()
		  .duration(duration)
		  .attr("d", diagonal);

	  link.exit().transition()
		  .duration(duration)
		  .attr("d", function(d) {
			var o = {x: source.x, y: source.y};
			return diagonal({source: o, target: o});
		  })
		  .remove();

	  nodes.forEach(function(d) {
		d.x0 = d.x;
		d.y0 = d.y;
	  });

	}

	// Toggle children on click.
	function click(d) {
	  if (d.children) {
		d._children = d.children;
		d.children = null;
	  } else {
		d.children = d._children;
		d._children = null;
	  }
	  update(d);
	}

}

draw_chart("Planeación");

</script>
